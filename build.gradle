apply plugin: 'java'
apply plugin: 'scala'

repositories {
// flatDir { dirs "lib" }
    jcenter()
// mavenCentral()
}

dependencies {
    compile "org.scala-lang:scala-library:2.10"

    compile "org.apache.spark:spark-core_2.10:1.5.2"
    compile "org.apache.spark:spark-streaming_2.10:1.5.2"
    compile "org.apache.spark:spark-streaming-kafka_2.10:1.5.2"

    testCompile 'junit:junit:4.12'
}

task run(type: JavaExec, dependsOn: classes) {
    main = 'AppMain'
    classpath sourceSets.main.runtimeClasspath
    classpath configurations.runtime
    args 'localhost:9092', 'topic1'
}

task distlib(type: Copy) {
  into "build/distlib"
  from configurations.runtime
}

task distlibtest(type: Copy) {
  into "build/distlibtest"
  from configurations.testRuntime - configurations.runtime
}
